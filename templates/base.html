<!doctype html>
<html lang="en" data-bs-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}PM Internship Scheme{% endblock %}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    :root, [data-bs-theme="light"] {
      --brand-saffron: #FF9933;
      --brand-blue: #000080;
      --brand-green: #138808;
      --bs-body-bg: #f0f2f5;
      --bs-primary: var(--brand-blue);
      --bs-secondary: var(--brand-saffron);
      --bs-heading-color: #212529;
      --bs-body-color: #343a40;
      --bs-card-bg: #ffffff;
      --bs-card-border-color: #dee2e6;
      --bs-navbar-bg: var(--brand-blue);
      --bs-navbar-color: #ffffff;
      --bs-navbar-brand-color: #ffffff;
      --bs-footer-bg: var(--brand-blue);
      --bs-footer-color: #ffffff;
      --bs-link-color: #ffffff;
      --bs-link-hover-color: #eeeeee;
    }

    [data-bs-theme="dark"] {
      --brand-saffron: #e68a2e;
      --brand-blue: #00005a;
      --brand-green: #0d6d06;
      --bs-body-bg: #1a1a2e;
      --bs-primary: var(--brand-saffron);
      --bs-secondary: var(--brand-blue);
      --bs-heading-color: #f8f9fa;
      --bs-body-color: #e2e6e9;
      --bs-card-bg: #2a2a4a;
      --bs-card-border-color: #3b3b6b;
      --bs-navbar-bg: var(--brand-blue);
      --bs-navbar-color: #e2e6e9;
      --bs-navbar-brand-color: #f8f9fa;
      --bs-footer-bg: var(--brand-blue);
      --bs-footer-color: #e2e6e9;
      --bs-link-color: #e2e6e9;
      --bs-link-hover-color: #ffffff;
    }

    body {
      background-color: var(--bs-body-bg);
      color: var(--bs-body-color);
      font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    .header-main {
      background: var(--bs-card-bg);
      padding: 0.75rem 0;
      border-bottom: 1px solid var(--bs-card-border-color);
    }
    .header-logos {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .emblem { height: 50px; }
    .other-logo { height: 45px; }
    .header-text {
      font-size: 1rem;
      font-weight: 600;
      line-height: 1.2;
      color: var(--bs-heading-color);
    }
    .navbar { background-color: var(--bs-navbar-bg); transition: background-color 0.3s ease; }
    .navbar .nav-link { color: var(--bs-navbar-color); font-weight: 500; }
    .navbar .navbar-brand { color: var(--bs-navbar-brand-color); }
    .btn-brand { background-color: var(--brand-saffron); border-color: var(--brand-saffron); color: #fff; }
    .btn-brand:hover { background-color: #e68a2e; border-color: #e68a2e; color: #fff; }
    .footer { background: var(--bs-footer-bg); color: var(--bs-footer-color); padding: 2rem 0; margin-top: 2rem; transition: background-color 0.3s ease, color 0.3s ease; }
    .footer a { color: var(--bs-link-color); text-decoration: none; }
    .footer a:hover { text-decoration: underline; color: var(--bs-link-hover-color); }
    .card { background-color: var(--bs-card-bg); border: 1px solid var(--bs-card-border-color); color: var(--bs-body-color); transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease; }
  </style>
  {% block head %}{% endblock %}
</head>
<body>

<header class="header-main">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center">
      <div class="header-logos">
        <img src="https://upload.wikimedia.org/wikipedia/commons/5/55/Emblem_of_India.svg" alt="Emblem of India" class="emblem">
        <div class="header-text">
          Ministry of Corporate Affairs<br>
          <span class="text-muted">Government of India</span>
        </div>
      </div>
      <div class="header-logos d-none d-md-flex">
        <img src="https://vectorseek.com/wp-content/uploads/2023/09/G20-India-2023-Logo-Vector.svg-.png" alt="G20 India 2023 Logo" class="other-logo">
      </div>
    </div>
  </div>
</header>

<nav class="navbar navbar-expand-lg navbar-dark">
  <div class="container">
    <a class="navbar-brand fw-bold" href="/">PM Internship Portal</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"><span class="navbar-toggler-icon"></span></button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto align-items-center">
        <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
        {% if g.user %}
          <li class="nav-item"><a class="nav-link" href="/dashboard">Dashboard</a></li>
          <li class="nav-item"><a class="nav-link" href="/logout">Logout</a></li>
        {% else %}
          <li class="nav-item"><a class="nav-link" href="/login">Login</a></li>
          <li class="nav-item"><a class="nav-link" href="/signup">Signup</a></li>
        {% endif %}
        <li class="nav-item ms-lg-2">
            <button class="btn btn-outline-light btn-sm" id="theme-toggle">
                <i class="fas fa-moon" id="theme-icon-moon"></i>
                <i class="fas fa-sun d-none" id="theme-icon-sun"></i>
            </button>
        </li>
      </ul>
    </div>
  </div>
</nav>

<main class="container py-4">
  {% block content %}{% endblock %}
</main>

<footer class="footer">
  <div class="container text-center">
    <p class="mb-0">Content owned and maintained by the Ministry of Corporate Affairs, Government of India.</p>
    <p><a href="#">Website Policies</a> | <a href="#">Contact Us</a> | <a href="#">Help</a></p>
  </div>
</footer>

<div class="position-fixed bottom-0 end-0 p-3" style="z-index:1080">
  <div id="toast" class="toast align-items-center text-bg-primary border-0" role="alert">
    <div class="d-flex"><div class="toast-body" id="toast-body"></div><button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button></div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  function showToast(msg, type = 'primary') {
    const toastEl = document.getElementById('toast');
    toastEl.className = 'toast align-items-center text-bg-' + type + ' border-0';
    document.getElementById('toast-body').textContent = msg;
    new bootstrap.Toast(toastEl, { delay: 3000 }).show();
  }
  async function jsonFetch(url, opts = {}) {
    const res = await fetch(url, opts);
    const data = await res.json().catch(() => ({}));
    if (!res.ok) { throw new Error(data.error || 'An unexpected error occurred.'); }
    return data;
  }
  
  // --- Dark Mode Toggle Logic ---
  const themeToggle = document.getElementById('theme-toggle');
  const moonIcon = document.getElementById('theme-icon-moon');
  const sunIcon = document.getElementById('theme-icon-sun');
  const htmlEl = document.documentElement;

  const currentTheme = localStorage.getItem('theme') || 'light';
  htmlEl.setAttribute('data-bs-theme', currentTheme);
  if(currentTheme === 'dark') {
      moonIcon.classList.add('d-none');
      sunIcon.classList.remove('d-none');
  }

  themeToggle.addEventListener('click', () => {
    const newTheme = htmlEl.getAttribute('data-bs-theme') === 'dark' ? 'light' : 'dark';
    htmlEl.setAttribute('data-bs-theme', newTheme);
    localStorage.setItem('theme', newTheme);
    moonIcon.classList.toggle('d-none');
    sunIcon.classList.toggle('d-none');
  });
</script>
{% block scripts %}{% endblock %}
</body>
</html>